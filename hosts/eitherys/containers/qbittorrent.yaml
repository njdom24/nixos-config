services:
  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:latest
    container_name: qbittorrent
    network_mode: "container:gluetun"
    environment:
      - PUID=MEDIA_UID
      - PGID=MEDIA_GID
      - TZ=EST
      - WEBUI_PORT=43000
      - TORRENTING_PORT=31552
    volumes:
      - /srv/docker/qbittorrent/config:/config
      - /mnt/ext/Media/qbittorrent/downloads:/downloads
    #ports:
    #  - 8080:8080
    #  - 6881:6881
    #  - 6881:6881/udp
    restart: unless-stopped

  qbit_manage:
    container_name: qbit_manage
    image: ghcr.io/stuffanthings/qbit_manage:latest
    depends_on:
      - qbittorrent
    user: "MEDIA_UID:MEDIA_GID"
    volumes:
      - /srv/docker/qbit_manage/:/config:rw
      - /srv/docker/qbittorrent/qbit_manage/:/config
      - /mnt/ext/Media/qbittorrent/downloads:/data/torrents:rw 
      - /mnt/ext/Media/qbittorrent/downloads:/downloads:rw 
      #- /srv/docker/qbittorrent/:/qbittorrent/:ro # Must set "/qbittorrent/config/qBittorrent/BT_backup" in config file as "torrents_dir"
      - /srv/docker/qbittorrent/config/qBittorrent/BT_backup/:/qbittorrent/data/BT_backup
    network_mode: "container:gluetun"
    environment:
      - QBT_RUN=false
      - QBT_SCHEDULE=1440
      - QBT_CONFIG=config.yml
      - QBT_LOGFILE=activity.log
      - QBT_CROSS_SEED=false
      - QBT_RECHECK=false
      - QBT_CAT_UPDATE=false
      - QBT_TAG_UPDATE=false
      - QBT_REM_UNREGISTERED=false
      - QBT_REM_ORPHANED=false
      - QBT_TAG_TRACKER_ERROR=false
      - QBT_TAG_NOHARDLINKS=true
      - QBT_SHARE_LIMITS=false
      - QBT_SKIP_CLEANUP=false
      - QBT_DRY_RUN=false
      - QBT_LOG_LEVEL=INFO
      - QBT_DIVIDER==
      - QBT_WIDTH=100
    restart: unless-stopped
